# üé≠ Playwright Fixture UI Framework üöÄ

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –≠—Ç–æ –º–∏–Ω–∏-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è UI-—Ç–µ—Å—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Playwright** –∏ **Allure Reporter**. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö, –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –∏ –ª–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö UI-–∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤.

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üß© **Page Object & Fragment Object**: –≠–ª–µ–≥–∞–Ω—Ç–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ UI-—ç–ª–µ–º–µ–Ω—Ç–æ–≤.
- üìä **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Allure**: –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –æ –∫–∞–∂–¥–æ–º UI-–¥–µ–π—Å—Ç–≤–∏–∏ –∏ —Å–µ—Ç–µ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ "–∏–∑ –∫–æ—Ä–æ–±–∫–∏".
- üîß **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã Playwright**: –£–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å POM, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤.
- ‚öôÔ∏è **CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ì–æ—Ç–æ–≤—ã–µ –ø–∞–π–ø–ª–∞–π–Ω—ã –¥–ª—è GitHub Actions, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –Ω–∞ GitHub Pages.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- üü¢ Node.js: `18+`
- üì¶ npm (`8+`) –∏–ª–∏ yarn (`1.22+`)
- üé≠ Playwright: `1.52.0+` (_—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è_)

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/your-org/playwright-fixture-ui-framework.git
    cd playwright-fixtures-framework
    ```
2.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    npm install
    ```
3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä—ã –¥–ª—è Playwright:**
    ```bash
    npx playwright install
    ```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
playwright-fixtures-framework/
‚îú‚îÄ‚îÄ üìÅ src/                     # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ üõ†Ô∏è
‚îÇ   ‚îú‚îÄ‚îÄ üî© fixtures/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ base.fixture.ts    # –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã —Å POM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ ‚ú® allure-wrapper/      # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Allure
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìê decorators/      # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.decorators.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ network.decorators.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ locator.decorators.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Allure –æ–±–µ—Ä—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ pages/               # Page Object –∫–ª–∞—Å—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.page.ts
‚îÇ   ‚îú‚îÄ‚îÄ üß© fragments/           # Fragment Object –∫–ª–∞—Å—Å—ã (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.fragment.ts #
‚îÇ   ‚îî‚îÄ‚îÄ üõ†Ô∏è utils/               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üí® –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
npx playwright test
```

### üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á—ë—Ç–∞ Allure

1.  **–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤, —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –æ—Ç—á—ë—Ç:**
    ```bash
    # –ö–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç –æ—Ç—á–µ—Ç –≤ –ø–∞–ø–∫–µ allure-report
    # --clean —É–¥–∞–ª–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ allure-report –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
    npx allure generate allure-results --clean -o allure-report
    ```
2.  **–û—Ç–∫—Ä–æ–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
    ```bash
    npx allure open allure-report
    ```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞.

### 1. –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç —Å –ø—Ä—è–º—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ `page`

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ñ–∏–∫—Å—Ç—É—Ä—É `page` (–∫–æ—Ç–æ—Ä–∞—è —É–∂–µ –æ–±–µ—Ä–Ω—É—Ç–∞ –¥–ª—è Allure –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é).

```typescript
import { test, expect } from '../src/fixtures/base.fixture';

test('–±–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ page', async ({ page }) => {
  await page.goto('https://playwright.dev/');
  await expect(page).toHaveTitle(/Playwright/);
});
```

### 2. üèõÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Page Object –∏ Fragment Object

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å `MainPage` –∏ –µ–≥–æ —á–∞—Å—Ç—å—é `NavbarFragment` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ç–µ—Å—Ç–æ–≤.

```typescript
import { test, expect } from '../src/fixtures/base.fixture';

test('—Ç–µ—Å—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Page Object –∏ Fragment', async ({ mainPage }) => {
  // mainPage - —ç—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä MainPage, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–π —Ñ–∏–∫—Å—Ç—É—Ä–æ–π
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º MainPage –∏ –µ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç NavbarFragment
  await mainPage.goto(); // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ URL, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ mainPage.url
  await mainPage.navbar.selectLanguage('Python'); // –ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏—è
  await expect(mainPage.navbar.languageMenuTrigger).toHaveText('Python');
});
```

## üß© –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞

–§—Ä–µ–π–º–≤–æ—Ä–∫ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Ç–∞–∫, —á—Ç–æ–±—ã –µ–≥–æ –±—ã–ª–æ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å.

### ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Page Object)

1.  **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã**, –Ω–∞–ø—Ä–∏–º–µ—Ä `src/pages/login.page.ts`:

    ```typescript
    // src/pages/login.page.ts
    import { Page, Locator } from '@playwright/test';
    import { BasePage } from './base.page';

    export class LoginPage extends BasePage {
      constructor(page: Page) {
        super(page);
      }
    }
    ```

2.  **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ —Ñ–∏–∫—Å—Ç—É—Ä–∞—Ö** (`src/fixtures/base.fixture.ts`):
    –î–æ–±–∞–≤—å—Ç–µ –µ–µ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏ –≤ `baseTest.extend()`:

    ```typescript
    // src/fixtures/base.fixture.ts
    import { test as baseTest, Page, expect } from '@playwright/test';
    import { wrapPageWithAllure } from '../allure-wrapper';
    import { MainPage } from '../pages/main.page';
    import { LoginPage } from '../pages/login.page'; // üëà 1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

    declare global {
      namespace PlaywrightTestArgs {
        interface Fixtures {
          page: Page;
          mainPage: MainPage;
          loginPage: LoginPage; // üëà 2. –û–±—ä—è–≤–ª—è–µ–º —Ç–∏–ø –¥–ª—è –Ω–æ–≤–æ–π —Ñ–∏–∫—Å—Ç—É—Ä—ã
        }
      }
    }

    export const test = baseTest.extend<{
      page: Page;
      mainPage: MainPage;
      loginPage: LoginPage; // üëà 3. –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã generic —Ñ—É–Ω–∫—Ü–∏–∏ extend
    }>({
      page: async ({ page }, use) => {
        wrapPageWithAllure(page);
        await use(page);
      },
      mainPage: async ({ page }, use) => {
        const mainPage = new MainPage(page);
        await use(mainPage);
      },
      // üëá 4. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–∞–º—É —Ñ–∏–∫—Å—Ç—É—Ä—É –¥–ª—è LoginPage
      loginPage: async ({ page }, use) => {
        const loginPageInstance = new LoginPage(page);
        await use(loginPageInstance);
      },
    });

    export { expect };
    ```

    –¢–µ–ø–µ—Ä—å —Ñ–∏–∫—Å—Ç—É—Ä–∞ `loginPage` –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –≤–∞—à–∏—Ö —Ç–µ—Å—Ç–∞—Ö —Ç–∞–∫ –∂–µ, –∫–∞–∫ `page` –∏ `mainPage`!

### ‚ú® –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ (Fragment Object)

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã UI (–Ω–∞–ø—Ä–∏–º–µ—Ä, —à–∞–ø–∫–∞, –ø–æ–¥–≤–∞–ª, —Å–ª–æ–∂–Ω—ã–µ –º–µ–Ω—é).
**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞:**

–î–æ–ø—É—Å—Ç–∏–º, –º—ã —Ö–æ—Ç–∏–º —Å–æ–∑–¥–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç –¥–ª—è –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`UserMenuFragment`).

**1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞:**

```typescript
// src/fragments/user-menu.fragment.ts
import { Page, Locator } from '@playwright/test';
import { BaseFragment } from './base.fragment';
import { allure } from 'allure-playwright';

export class UserMenuFragment extends BaseFragment {
  protected initLocators(): void {
    this.locators = {
      profileLink: this.page.getByRole('link', { name: 'My Profile' }),
      logoutButton: this.page.getByRole('button', { name: 'Logout' }),
    };
  }

  async navigateToProfile(): Promise<void> {
    await allure.step('–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è —á–µ—Ä–µ–∑ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', async () => {
      await this.profileLink.click();
    });
  }

  async logout(): Promise<void> {
    await allure.step('–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', async () => {
      await this.logoutButton.click();
    });
  }
}
```

**2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –≤ Page Object:**

```typescript
// src/pages/home.page.ts
import { Page } from '@playwright/test';
import { BasePage } from './base.page';
import { UserMenuFragment } from '../fragments/user-menu.fragment'; // üëà –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç

export class HomePage extends BasePage {
  readonly url: string = '/home';
  readonly userMenu: UserMenuFragment; // üëà –û–±—ä—è–≤–ª—è–µ–º —Å–≤–æ–π—Å—Ç–≤–æ –¥–ª—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞

  constructor(page: Page) {
    super(page);
    this.userMenu = new UserMenuFragment(this.page); // üëà –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç
  }
}
```

–¢–µ–ø–µ—Ä—å –≤ –≤–∞—à–∏—Ö —Ç–µ—Å—Ç–∞—Ö –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å `await homePage.userMenu.navigateToProfile();` –∏–ª–∏ `await homePage.openProfileFromMenu();`.
–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü —á–∏—â–µ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

## üåê API-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–§—Ä–µ–π–º–≤–æ—Ä–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–π –∏ —É–¥–æ–±–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ Allure.
–ï–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤—ã—Å–æ–∫–æ—á–∏—Ç–∞–µ–º—ã–µ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ API-—Ç–µ—Å—Ç—ã.

### ‚ö° –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞

```
src/api/
‚îú‚îÄ‚îÄ service/              # –°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ API
‚îÇ   ‚îî‚îÄ‚îÄ google.service.ts # –ü—Ä–∏–º–µ—Ä —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ‚îÄ allureReport.ts       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Allure –¥–ª—è API-–∑–∞–ø—Ä–æ—Å–æ–≤
‚îî‚îÄ‚îÄ http_methods.ts       # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å API –∏ –º–µ—Ç–æ–¥—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
```

- **`API` –∫–ª–∞—Å—Å** ‚Äî –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å HTTP-–∑–∞–ø—Ä–æ—Å–∞–º–∏
- **`AllureReport` –∫–ª–∞—Å—Å** ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –≤ Allure
- **–°–µ—Ä–≤–∏—Å–Ω—ã–µ –∫–ª–∞—Å—Å—ã** ‚Äî –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ API (–Ω–∞–ø—Ä–∏–º–µ—Ä, GoogleService)
- **–§–∏–∫—Å—Ç—É—Ä—ã** ‚Äî –¥–µ–ª–∞—é—Ç —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≤ —Ç–µ—Å—Ç–∞—Ö —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π –∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### üõ†Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API-—Å–µ—Ä–≤–∏—Å–∞

–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```typescript
// src/api/service/user.service.ts
import { API, httpRequest, APIOptions } from '../http_methods.js';
import { APIResponse } from '@playwright/test';

interface UserServiceResponse {
  promise: APIResponse;
  json: any;
}

export class UserService extends API {
  private serviceData = {
    // –ë–∞–∑–æ–≤—ã–π URL —Å–µ—Ä–≤–∏—Å–∞
    baseUrl: 'https://api.example.com',
    // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    headers: {
      Authorization: `Bearer ${process.env.API_TOKEN}`,
      Accept: 'application/json',
    },
  };

  /**
   * –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
   */
  async getUsers(page: number = 1, limit: number = 10): Promise<UserServiceResponse> {
    const stepName = '–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π';

    const options: APIOptions = {
      url: this.serviceData.baseUrl,
      path: '/users',
      method: 'GET',
      headers: this.serviceData.headers,
      // Query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
      params: {
        page,
        limit,
      },
    };

    return await httpRequest(stepName, options, this.serviceData);
  }

  /**
   * –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (POST-–∑–∞–ø—Ä–æ—Å —Å —Ç–µ–ª–æ–º)
   */
  async createUser(userData: any): Promise<UserServiceResponse> {
    const stepName = '–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è';

    const options: APIOptions = {
      url: this.serviceData.baseUrl,
      path: '/users',
      method: 'POST',
      headers: this.serviceData.headers,
      // –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ JSON)
      data: userData,
    };

    return await httpRequest(stepName, options, this.serviceData);
  }

  /**
   * –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (PATCH-–∑–∞–ø—Ä–æ—Å)
   */
  async patchUser(id: string, partialData: any): Promise<UserServiceResponse> {
    const stepName = `–ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID ${id}`;

    const options: APIOptions = {
      url: this.serviceData.baseUrl,
      path: `/users/${id}`,
      method: 'PATCH',
      headers: this.serviceData.headers,
      data: partialData,
    };

    return await httpRequest(stepName, options, this.serviceData);
  }

  /**
   * –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (DELETE-–∑–∞–ø—Ä–æ—Å)
   */
  async deleteUser(id: string): Promise<UserServiceResponse> {
    const stepName = `–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID ${id}`;

    const options: APIOptions = {
      url: this.serviceData.baseUrl,
      path: `/users/${id}`,
      method: 'DELETE',
      headers: this.serviceData.headers,
    };

    return await httpRequest(stepName, options, this.serviceData);
  }

  /**
   * –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (POST —Å FormData)
   */
  async uploadUserAvatar(userId: string, filePath: string): Promise<UserServiceResponse> {
    const stepName = `–ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userId}`;

    // –°–æ–∑–¥–∞–µ–º FormData –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
    const formData = new FormData();
    formData.append('avatar', Bun.file(filePath)); // –ò—Å–ø–æ–ª—å–∑—É–µ–º Bun.file –∏–ª–∏ –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞
    formData.append('userId', userId);

    const options: APIOptions = {
      url: this.serviceData.baseUrl,
      path: `/users/${userId}/avatar`,
      method: 'POST',
      headers: {
        // Content-Type –Ω–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å, –æ–Ω –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å boundary
        ...this.serviceData.headers,
      },
      data: formData,
    };

    return await httpRequest(stepName, options, this.serviceData);
  }
}
```

### üìã –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ –≤ —Ñ–∏–∫—Å—Ç—É—Ä–∞—Ö

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞, –µ–≥–æ –Ω—É–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ç–µ—Å—Ç–∞—Ö:

```typescript
// src/fixtures/services.fixture.ts
import { test as baseTest } from '@playwright/test';
import { UserService } from '../api/service/user.service';
// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

declare global {
  namespace PlaywrightTestArgs {
    interface Fixtures {
      userService: UserService;
      // –û–±—ä—è–≤–∏—Ç–µ —Ç–∏–ø—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    }
  }
}

export const test = baseTest.extend<{
  userService: UserService;
  // –î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã
}>({
  userService: async ({}, use) => {
    await use(new UserService());
  },
  // –§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
});

export { expect } from '@playwright/test';
```

### üß™ –ü—Ä–∏–º–µ—Ä—ã API-—Ç–µ—Å—Ç–æ–≤

–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å:

```typescript
// tests/api/user-api.spec.ts
import { test, expect } from '../../src/fixtures/merge.fixtures';

test.describe('API —Ç–µ—Å—Ç—ã: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏', () => {
  let userId: string;

  test('–î–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π', async ({ userService }) => {
    // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
    const response = await userService.getUsers(1, 5);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞
    expect(response.promise.status()).toBe(200);
    expect(response.json.users).toBeArray();
    expect(response.json.meta.totalCount).toBeNumber();
    expect(response.json.meta.page).toBe(1);
    expect(response.json.meta.limit).toBe(5);
  });

  test('–î–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', async ({ userService }) => {
    // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    const userData = {
      name: '–ò–≤–∞–Ω –¢–µ—Å—Ç–æ–≤',
      email: `user-${Date.now()}@example.com`,
      role: 'user',
    };

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º POST-–∑–∞–ø—Ä–æ—Å
    const response = await userService.createUser(userData);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∏ –¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–≤–µ—Ç–µ
    expect(response.promise.status()).toBe(201);
    expect(response.json.id).toBeString();
    expect(response.json.name).toBe(userData.name);
    expect(response.json.email).toBe(userData.email);

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤
    userId = response.json.id;
  });

  test('–î–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', async ({ userService }) => {
    const response = await userService.getUserById(userId);

    expect(response.promise.status()).toBe(200);
    expect(response.json.id).toBe(userId);
    expect(response.json.name).toBeString();
    expect(response.json.email).toBeString();
  });

  test('–î–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', async ({ userService }) => {
    const updatedData = {
      name: '–ò–≤–∞–Ω –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π',
      role: 'admin',
    };

    const response = await userService.updateUser(userId, updatedData);

    expect(response.promise.status()).toBe(200);
    expect(response.json.name).toBe(updatedData.name);
    expect(response.json.role).toBe(updatedData.role);
  });

  test('–î–æ–ª–∂–µ–Ω —á–∞—Å—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', async ({ userService }) => {
    const partialUpdate = {
      name: '–ò–≤–∞–Ω –ü–∞—Ç—á',
    };

    const response = await userService.patchUser(userId, partialUpdate);

    expect(response.promise.status()).toBe(200);
    expect(response.json.name).toBe(partialUpdate.name);
    expect(response.json.role).toBe('admin');
  });

  test('–î–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', async ({ userService }) => {
    // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –µ—Å—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ
    const avatarPath = './test-data/avatar.jpg';
    const response = await userService.uploadUserAvatar(userId, avatarPath);

    expect(response.promise.status()).toBe(200);
    expect(response.json.avatarUrl).toBeString();
    expect(response.json.avatarUrl).toContain(userId);
  });
});
```

### üîÑ –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API –∏ UI —Ç–µ—Å—Ç–æ–≤

–§—Ä–µ–π–º–≤–æ—Ä–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å API –∏ UI —Ç–µ—Å—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã:

```typescript
// tests/combined/user-workflow.spec.ts
import { test, expect } from '../../src/fixtures/merge.fixtures';

test.describe('–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏', () => {
  test('–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ UI', async ({ userService, mainPage }) => {
    // 1. –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API
    const userData = {
      name: '–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –¢–µ—Å—Ç',
      email: `complex-${Date.now()}@example.com`,
      password: 'SecurePass123',
    };

    const apiResponse = await userService.createUser(userData);
    expect(apiResponse.promise.status()).toBe(201);
    const userId = apiResponse.json.id;

    // 2. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ UI
    await mainPage.goto();

    // 3. –õ–æ–≥–∏–Ω–∏–º—Å—è –ø–æ–¥ —Å–æ–∑–¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
    await mainPage.navbar.login(userData.email, userData.password);

    // 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
    await expect(mainPage.navbar.userProfile).toBeVisible();
    const profileName = await mainPage.navbar.getUserProfileName();
    expect(profileName).toBe(userData.name);

    // 5. –û—á–∏—Å—Ç–∫–∞: —É–¥–∞–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API
    await userService.deleteUser(userId);
  });
});
```
